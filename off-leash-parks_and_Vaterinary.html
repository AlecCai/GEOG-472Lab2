
<html>
<head>
<title>Leaflet Exercise</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <style>
    .myDiv {
      border: 5px outset grey;
      background-color: white;
      text-align: center;

    }

    h2{
      color: #215e0d
    }
    h3{
      color: #1a95db
    }


    </style>
  </head>
  <body>
      <div class="myDiv">
      <h2>Vancouver off leash dog parks  <h3> & Veterinary clinics</h3></h2>

      </div>
      <div id="map" style="width: 100vw; height: 100vh;"></div>
      <div id="controls" style="margin: 15px;">
      <button id="showAlloffLeashParks">Show All parks</button>

      <span style="display:inline-block; width: 30px"></span>
          <input type="text" id="highlightDogPark" placeholder="Park or Local area name">
          <button id="highlightParkButton">Highlight</button>

        </div>

    <script>

    var map = L.map('map',
              {
                center:[49.24174822289595, -123.11687344231983],
                zoom : 12.5
              });


          var Stamen_TonerLite = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}', {
	             attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	              subdomains: 'abcd',
                maxZoom: 16,
                minZoom: 12,
	               ext: 'png'
               }).addTo(map);



    var myStyle = {
      color: "#215e0d",
      weight: 3,
      opacity: 1,
      dashArray: '2',
      fillOpacity: 0.8
              };
    var MyHighlightedStyle = {
      color: "blue",
      weight: 2,
      opacity: 1,
      dashArray: '2',
      fillOpacity: 0.8
};

    var marker = L.marker([49.268439555709826, -123.16577850159727]).addTo(map);
    marker.bindPopup("<b>Kitsilano Animal Clinic</b><br><br>URL: https://kitsilanoanimalclinic.ca/<br><br>Address:2645 West 4th Avenue,Vancouver B.C, V6K 1P8<br><br>Phone: 604-736-8648").openPopup();

    var marker = L.marker([49.26795093501666, -123.1866552732834]).addTo(map);
    marker.bindPopup("<b>Amherst Veterinary Hospital</b><br><br>URL:https://amherstvethospital.com/?utm_source=GMBlisting&utm_medium=organic<br><br>Address:2645 West 4th Avenue,Vancouver B.C, V6K 1P8<br><br>Phone: +16042217771").openPopup();

    var marker = L.marker([49.26401303179876, -123.17498583035297]).addTo(map);
    marker.bindPopup("<b>Acadia Veterinary Clinic Ltd</b><br><br>URL: http://www.acadiavetclinic.ca/<br><br>Address:3142 W Broadway, Vancouver, BC V6K 2H3<br><br>Phone: +16047387321").openPopup();

    var marker = L.marker([49.23759039281876, -123.15565992883677]).addTo(map);
    marker.bindPopup("<b>West Boulevard Veterinary Clinic</b><br><br>URL: http://www.wbvc.bc.ca/<br><br>Address:5383 West Blvd, Vancouver, BC V6M 3W4<br><br>Phone: +16042667421").openPopup();

    var marker = L.marker([49.231847610519054, -123.1560167210474]).addTo(map);
    marker.bindPopup("<b>Kerrisdale Veterinary Hospital</b><br><br>URL: http://www.kerrisdalevethospital.com/<br><br>Address:5999 West Blvd, Vancouver, BC V6M 3X1<br><br>Phone:+16042664171").openPopup();

    var marker = L.marker([49.26340251983921, -123.14569724113565]).addTo(map);
    marker.bindPopup("<b>Burrard Animal Hospital + Emergency</b><br><br>URL: http://www.burrardvet.com/<br><br>Address:1788 W Broadway #105, Vancouver, BC V6J 1Y1<br><br>Phone:+16047385683").openPopup();

    var marker = L.marker([49.272742531345266, -123.14747080485056]).addTo(map);
    marker.bindPopup("<b>Cypress St. Animal Hospital Vancouver</b><br><br>URL: https://cypressvet.com/<br><br>Address:1889 Cornwall Ave, Vancouver, BC V6J 1C6<br><br>Phone: +16047342500").openPopup();

    var marker = L.marker([49.26624267764923, -123.13547255877161]).addTo(map);
    marker.bindPopup("<b>Hemlock Animal Hospital Vancouver</b><br><br>URL: http://www.hemlockvet.com/<br><br>Address:1314 W 4th Ave, Vancouver, BC V6H 4A3<br><br>Phone: +16045581400").openPopup();

    var marker = L.marker([49.219523385508666, -123.1409850556165]).addTo(map);
    marker.bindPopup("<b>Dr. Richard Calland Veterinary Consulting Service</b><br><br>URL: http://richardcalland.com/<br><br>Address:1527 W 57th Ave, Vancouver, BC V6P 6E9<br><br>Phone:+16045657217").openPopup();

    var marker = L.marker([49.21161479399416, -123.09299993776534]).addTo(map);
    marker.bindPopup("<b>Intercity Animal Emergency Clinic</b><br><br>URL: http://www.vancouveranimaler.com/<br><br>Address:580 SE Marine Dr, Vancouver, BC V5X 2T4<br><br>Phone:+16043218080").openPopup();

    var marker = L.marker([49.22159169420692, -123.03921361020608]).addTo(map);
    marker.bindPopup("<b>Champlain Animal Clinic</b><br><br>URL:https://champlainvet.ca/<br><br>Address:3150 E 54th Ave #190, Vancouver, BC V5S 1Z1<br><br>Phone:+16044390007").openPopup();

    var marker = L.marker([49.23342329196136, -123.02573945237134]).addTo(map);
    marker.bindPopup("<b>Pacific Pet Clinic </b><br><br>URL:http://www.pacificpetclinic.ca/<br><br>Address:3628 Kingsway, Vancouver, BC V5R 5M2<br><br>Phone:+16044373799").openPopup();

    var marker = L.marker([49.25082050845288, -123.07259503585226]).addTo(map);
    marker.bindPopup("<b>Vancouver Veterinary Hospital</b><br><br>URL: http://www.vancouverveterinary.com/<br><br>Address:1541 Kingsway, Vancouver, BC V5N 2R8<br><br>Phone:+16048762231").openPopup();

    var marker = L.marker([49.25586881385016, -123.11535581256636]).addTo(map);
    marker.bindPopup("<b>West King Edward Animal Clinic</b><br><br>URL:http://www.vancouvervet.com/<br><br>Address:3386 Cambie St, Vancouver, BC V5Z 2W5<br><br>Phone:+16048734433").openPopup();

    var marker = L.marker([49.271450761788785, -123.10900256912215]).addTo(map);
    marker.bindPopup("<b>Olympic Village Veterinary Clinic</b><br><br>URL: http://www.olympicvillagevet.com/<br><br>Address:189 W 2nd Ave, Vancouver, BC V5Y 1B8<br><br>Phone:+12365216131").openPopup();

    var marker = L.marker([49.270778633834794, -123.04646449044317]).addTo(map);
    marker.bindPopup("<b>1st Ave Animal Hospital</b><br><br>URL: http://www.1staveanimalhospital.com/<br><br>Address:2800 E 1st Ave, Vancouver, BC V5M 4N9<br><br>Phone:+16042545480").openPopup();



    function onEachParkName(feature,layer){
      if (feature.properties && feature.properties.name) {
           layer.bindTooltip("Park Name: "+feature.properties.name + "<br>"+ "<br>"+"Park URL:   "+ feature.properties.url+"<br>"+"Local area : "+feature.properties.geo_local_area+ "<br>"+ "Address: "+feature.properties.address);
        };
    }

    function parkPolygonToLayer(feature, latlngs) {
       if (parkToHighlight === "") {
           styleToUse = myStyle;
         } else {
           styleToUse = MyHighlightedStyle;
         }
         return L.polygon(
             latlng,
             styleToUse
           );
         }

     function parkToFilter(feature, layer) {
           if (parkToHighlight === "") {
             return true;

           } else if (feature.properties && feature.properties.name && feature.properties.geo_local_area) {

             return feature.properties.name.toLowerCase().includes(parkToHighlight.toLowerCase())||feature.properties.geo_local_area.toLowerCase().includes(parkToHighlight.toLowerCase());

           } else {
             return false;
           }
         }

      var lastLayerAdded = {};

      function addPark() {
        if (map.hasLayer(lastLayerAdded)) {
          map.removeLayer(lastLayerAdded);
        }
        if (parkToHighlight === "") {
                styleToUse = myStyle;
              } else {
                styleToUse = MyHighlightedStyle;
              }

        lastLayerAdded = L.geoJSON(parkGeoJSONdata, {
          polygonToLayer: parkPolygonToLayer,
          onEachFeature: onEachParkName,
          filter: parkToFilter,
          style : styleToUse,

        });

        lastLayerAdded.addTo(map);
      };

        var parkToHighlight = "";

          function highlightPark() {
            parkToHighlight = document
              .getElementById("highlightDogPark")
              .value;
            addPark();
            parkToHighlight = "";
          }

          var parkGeoJSONdata;
          $.getJSON("https://raw.githubusercontent.com/AlecCai/GEOG-472Lab2/main/dog-off-leash-parks.geojson",
                          function(data) {
          parkGeoJSONdata = data;

          document
          .getElementById('showAlloffLeashParks')
          .addEventListener("click", addPark);

          document
          .getElementById("highlightParkButton")
          .addEventListener("click", highlightPark);

          }
          );


  </script>
</body>
</html>
